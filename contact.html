<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <title>lovegift</title>
  <link rel="stylesheet" href="./style.css">
 

</head>
   <body class="home-page">
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="30" height="30"><path fill="#d936a5" d="M305 151.1L320 171.8L335 151.1C360 116.5 400.2 96 442.9 96C516.4 96 576 155.6 576 229.1L576 231.7C576 343.9 436.1 474.2 363.1 529.9C350.7 539.3 335.5 544 320 544C304.5 544 289.2 539.4 276.9 529.9C203.9 474.2 64 343.9 64 231.7L64 229.1C64 155.6 123.6 96 197.1 96C239.8 96 280 116.5 305 151.1z"/></svg>
           Lovegift
      </a>
      <div class="" id="user-section">
        <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c JS th√™m v√†o ƒë√¢y -->
      </div>   
    </div>
  </nav>
<div class="container-fluid">
   <div class="row p-4 align-items-start">
        <div class="sidebar-left col-md-2 row ms-2 rounded-3 " style="background-color: #482048;">
      <div class="sidebar row ms-2  rounded-3" ></div>
      <div class="list-group">
        <h1 class="text-center fw-bold text-white fs-2  ">Menu</h1>
      </div>
               <ul class="list-group flex-column ">
                    <li class="list-group-item mb-2">
                        <a class="list-group-link "  href="./index.html"><i class="bi bi-house"></i>Trang ch·ªß</a>
                        
                    </li>
                    <li class="list-group-item mb-2">
                        <a class="list-group-link"   href="./orders.html"><i class="bi bi-cart"></i>ƒê∆°n h√†ng</a>
                    </li>
                    <li class="list-group-item mb-2">
                        <a class="list-group-link"  href="./transactions.html"><i class="bi bi-arrow-left-right"></i>Giao d·ªãch</a>
                    </li>
                    <li class="list-group-item mb-2">
                        <a class="list-group-link" href="./gifts.html"><i class="bi bi-ticket"></i>Voucher</a>
                    </li>
                    <li class="list-group-item">
                        <a class="list-group-link active"  href="./contact.html"><i class="bi bi-headset"></i>H·ªó tr·ª£</a>
                    </li>
                </ul>
      </div>
    <div class="col-md-1 ">
       </div>
   <div class="col-md-9 main-content text-center text-white  ">
    <div class="main-content">
    <h1 class="support-title">üí¨ H·ªñ TR·ª¢ KH√ÅCH H√ÄNG</h1>
    <p style="font-size: 1.2em; margin-bottom: 30px;">Li√™n h·ªá nhanh ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ 24/7!</p>
    <div class="support-buttons">
      <a href="https://www.facebook.com/nguyen.tan.dung.848314" target="_blank" class="support-btn">
        <i class="bi bi-facebook me-2"></i> Nh·∫Øn qua Facebook
      </a>
      <a href="https://zalo.me/0867234503" target="_blank" class="support-btn"> <!-- Thay link Zalo OA th·∫≠t -->
        <i class="bi bi-chat-dots me-2"></i> Nh·∫Øn qua Zalo
      </a>
      <a href="https://www.tiktok.com/@yourprofile" target="_blank" class="support-btn"> <!-- Thay TikTok profile -->
        <i class="bi bi-tiktok me-2"></i> Nh·∫Øn qua TikTok
      </a>
    </div>
  </div>

  <!-- JS Hi·ªáu ·ª®ng Fade-In (T·ª± ƒê·ªông Khi Load) -->
  <script>
    window.addEventListener('load', () => {
      document.querySelectorAll('.support-btn').forEach((btn, index) => {
        btn.style.animationDelay = `${index * 0.1}s`;
      });
    });
  </script>

  

  <!-- Ph√¢n trang -->
  
  <button id="effectToggle" class="btn btn-custom" title="B·∫≠t hi·ªáu ·ª©ng Heart">
    <i class="bi bi-heart"></i>
  </button>
</div>
</div>
</div>
  
  
  <!--js ƒëƒÉng nh·∫≠p google--> 
  <script>
    // H√†m decode JWT token
    function parseJwt(token) {
      try {
        console.log("ƒêang decode token...");
        const base64Url = token.split('.')[1];
        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
        const userInfo = JSON.parse(jsonPayload);
        console.log("User info decoded:", userInfo);
        return userInfo;
      } catch (e) {
        console.error("L·ªói decode token:", e);
        return null;
      }
    }

    // H√†m c·∫≠p nh·∫≠t UI (gi·ªëng popup Google)
    function updateUI(userInfo) {
      console.log("C·∫≠p nh·∫≠t UI v·ªõi userInfo:", userInfo);
      const userSection = document.getElementById('user-section');
      if (userInfo && userInfo.name) {
        const firstName = userInfo.given_name || userInfo.name.split(' ')[0];
        userSection.innerHTML = `
          <div class="dropdown">
            <img src="${userInfo.picture}" alt="User avatar" width="32" height="32" right="20" class=" rounded-1 dropdown-toggle " data-bs-toggle="dropdown" style="cursor: pointer;  onerror="this.src='https://via.placeholder.com/32?text=${userInfo.name.charAt(0).toUpperCase()}'">
            <ul class="dropdown-menu dropdown-menu-end" style="min-width: 250px; background: #202124; border: none; border-radius: 8px; padding: 12px;">
              <li class="dropdown-item text-white p-2 border-bottom" style="border-bottom: 1px solid #5f6368;">
                <div class="d-flex align-items-center">
                  <div class="me-3">
                    <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; font-size: 18px; color: white;">
                      ${userInfo.name.charAt().toUpperCase()}
                    </div>
                  </div>
                  <div>
                    <div class="fw-bold text-white">${userInfo.name}</div>
                    <div class="text-muted small">${userInfo.email}</div>
                  </div>
                </div>
              </li>
              <li><hr class="dropdown-divider bg-secondary"></li>
              <li class="dropdown-item text-white p-2">
                <button id="logout-btn" class="btn btn-link text-danger w-100 text-start p-0" style="pointer-events: auto;">
                  <i class="bi bi-box-arrow-right me-2"></i>ƒêƒÉng xu·∫•t
                </button>
              </li>
            </ul>
          </div>
        `;
        
        // Event cho logout
        setTimeout(() => {
          const logoutBtn = document.getElementById('logout-btn');
          if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
              e.preventDefault();
              console.log("ƒêƒÉng xu·∫•t clicked!");
              if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
                google.accounts.id.disableAutoSelect();
              }
              localStorage.removeItem('userToken');
              updateUI(null);
            });
          }
        }, 100);
      } else {
        console.log("Reset UI v·ªÅ n√∫t ƒëƒÉng nh·∫≠p");
        userSection.innerHTML = `
          <button id="google-login-btn" class="btn google-btn">
            <img src="./img/g-logo.png" width="20" alt="Google logo">
            ƒêƒÉng nh·∫≠p v·ªõi Google
          </button>
        `;
        // Render button v·ªõi try-catch
        if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
          try {
            setTimeout(() => {
              google.accounts.id.renderButton(
                document.getElementById("google-login-btn"),
                { theme: "filled", size: "large", type: "standard" }
              );
              console.log("Google button rendered th√†nh c√¥ng");
            }, 100);
          } catch (error) {
            console.error("Render button fail (c√≥ th·ªÉ do origin kh√¥ng h·ª£p l·ªá):", error);
          }
        } else {
          console.error("Google script ch∆∞a load ƒë·∫ßy ƒë·ªß!");
        }
      }
    }

    // Callback t·ª´ Google
    function handleCredentialResponse(response) {
      console.log("Callback fired! Response:", response);
      const token = response.credential;
      if (!token) {
        console.error("Kh√¥ng c√≥ token t·ª´ Google!");
        return;
      }
      const userInfo = parseJwt(token);
      if (userInfo) {
        localStorage.setItem('userToken', token);
        updateUI(userInfo);
      } else {
        console.error("Decode token fail!");
      }
    }

    // Kh·ªüi t·∫°o
    window.onload = function () {
      console.log("Trang load, kh·ªüi t·∫°o Google...");
      
      // Ki·ªÉm tra saved token
      const savedToken = localStorage.getItem('userToken');
      if (savedToken) {
        console.log("C√≥ saved token, ki·ªÉm tra...");
        const userInfo = parseJwt(savedToken);
        if (userInfo && userInfo.exp * 1000 > Date.now()) {
          console.log("Token valid, load UI t·ª´ saved");
          setTimeout(() => updateUI(userInfo), 200);
          return;
        } else {
          console.log("Token expired, x√≥a");
          localStorage.removeItem('userToken');
        }
      }

      // Fallback: Lu√¥n render button custom tr∆∞·ªõc n·∫øu ch∆∞a login
      updateUI(null);

      // Kh·ªüi t·∫°o Google n·∫øu ch∆∞a login
      if (typeof google === 'undefined') {
        console.error("Google script ch∆∞a load! Ki·ªÉm tra <script src='https://accounts.google.com/gsi/client'>");
        return;
      }

      google.accounts.id.initialize({
        client_id: "853533629897-kguvohuvjqnbo18q517vbls6dk23p6bd.apps.googleusercontent.com",
        callback: handleCredentialResponse,
        auto_select: false,
        cancel_on_tap_outside: false
      });

      // Render button v·ªõi try-catch
      try {
        setTimeout(() => {
          google.accounts.id.renderButton(
            document.getElementById("google-login-btn"),
            { theme: "filled", size: "large", type: "standard" }
          );
          console.log("Google button rendered");
        }, 300);
      } catch (error) {
        console.error("Kh·ªüi t·∫°o button fail:", error);
      }
    };
  </script>
 <!-- ========== js hi·ªáu ·ª©ng heart giao di·ªán ========== -->
  <script>
    // Pagination JS
    document.addEventListener('DOMContentLoaded', function() {
      const paginationLinks = document.querySelectorAll('#pagination .page-link');
      paginationLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const page = this.getAttribute('data-page');
          if (page === 'prev' || page === 'next') {
            // Handle prev/next logic here if needed (e.g., change current page)
            console.log('Navigating to', page);
            return;
          }
          const pageNum = parseInt(page);
          // Remove active class from all
          paginationLinks.forEach(l => {
            l.parentElement.classList.remove('active');
          });
          // Add active to clicked
          this.parentElement.classList.add('active');
          console.log('Switched to page', pageNum);
          // Here you can add logic to load content for that page
        });
      });
    });

    // ========== HI·ªÜU ·ª®NG HEART JS (T√°ch ri√™ng) ==========
    function createHeart(size) {
      const heart = document.createElement('div');
      heart.classList.add('heart', size);
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDuration = Math.random() * 3 + 2 + 's';
      heart.style.opacity = Math.random() * 0.8 + 0.2;
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 4000);
    }

    function startEffects() {
      const interval = setInterval(() => {
        if (document.querySelectorAll('.heart').length < 20) {
          const size = Math.random() > 0.5 ? 'large' : 'small';
          createHeart(size);
        }
      }, 150);
      return interval;
    }

    let effectInterval = null;
    const toggleBtn = document.getElementById('effectToggle');
    toggleBtn.addEventListener('click', () => {
      if (effectInterval) {
        clearInterval(effectInterval);
        effectInterval = null;
        document.querySelectorAll('.heart').forEach(e => e.remove());
        toggleBtn.title = 'B·∫≠t hi·ªáu ·ª©ng Heart';
        toggleBtn.innerHTML = '<i class="bi bi-heart"></i>'; // Tr√°i tim r·ªóng khi t·∫Øt
      } else {
        effectInterval = startEffects();
        toggleBtn.title = 'T·∫Øt hi·ªáu ·ª©ng Heart';
        toggleBtn.innerHTML = '<i class="bi bi-heart-fill"></i>'; // Tr√°i tim ƒë·∫ßy khi b·∫≠t
      }
    });
    // ========== K·∫æT TH√öC HI·ªÜU ·ª®NG HEART JS ==========
  </script>
  <!-- ========== K·∫æT TH√öC HI·ªÜU ·ª®NG HEART ========== -->
  <!-- Nh√∫ng JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</body>
</html>